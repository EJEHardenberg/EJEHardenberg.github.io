<html>
  <head>
    <title>Short Codes and Routing in WordPress</title>
    <meta name="description" content="Ethan Eldridge's personal website"/>
	<meta name="keywords" content="Ethan,Eldridge,Joachim,Programming"/>
	<meta charset=utf-8 />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

    <link rel='stylesheet' href='/main.css' />
    <script src="/js/app.js"></script>
    <meta name="description" content="Personal website of Ethan Joachim Eldridge. Resume, blog, cooking, writing and more" />
  </head>
  <body>
  	<h1 id="huge">Ethan Joachim Eldridge: A Programmer.</h1>

<ol>
	<li><a href="/index.html">Home</a></li>
	<li><a href="https://github.com/EJEHardenberg">Github</a></li>
	<li><a href="/write">Writing</a></li>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/resume">Resume</a></li>
	<li><a href="//ejehardenberg.github.io/cooking">Cooking</a></li>
</ol>



    <p>One of the projects at my workplace has got me diving into WordPress. Should be
easy right? It&#39;s php, one of the simplest, easy to use (besides it&#39;s dreadful
$ symbol before everything), and dynamically typed languages out there. What 
could go wrong?</p>
<p>Simple: Everything. If you want to do custom code in a WordPress site, you make
a plugin. Sounds easy enough, sounds like Drupal&#39;s modules. Cool. That makes 
perfect sense to me. But then came the learning curve. </p>
<p>Luckily the <a href="codex.wordpress.org">Codex</a> has a ton of information, and there are some great tutorials
out there. But anything involving how to run just a standard php file was near
impossible to find. All I wanted to do was be able to say: This URL goes to This
file, without making an .htaccess file. And it seemed impossible. </p>
<p>Luckily, I had an example (sort of) of how to make a custom router.
Granted it was nested heavily into a massive plugin that I had to search
through. But it used the technique of making objects that were
associated with custom post types in order to serve it&#39;s content. </p>
<p>Well that was great. But I only really wanted to serve a single page.
Not a bunch of posts. I could programatically create a page from my
plug-in and then try to somehow hook up listening to JUST that page with
a slug of some kind and then make the template include my file? </p>
<p>But that seemed messy. There had to be a clean way. So I got thinking.
Well, if they can include custom post types, then I can make just one
and then keep a reference to it some how. Simple enough. Use get_option
to check the ID of the post I&#39;ll make from some initializing function. </p>
<p>So I did that (after some trial and error where I forgot to hook into
the init hook of wordpress before calling wp_insert_post -- which fails
by the way, fatally. No WP_Error or anything) and bam. It was working. </p>
<p>The best part of the whole routing system was that since I was capturing
my php files output in the output buffer (ob_start and friends). That
content was then sent to wordpress as a string to be interpreted as the 
content of the post being rendered onto the page. This means that any 
shortcodes in the php files output were expanded. </p>
<p>This is actually very cool because it allows me to integrate the 
flexibility of my php code with the simplicity of shortcodes. Essentially
I ended up with my own meta language to write my views in. A nice combination
of php and shortcodes. </p>
<p>I made a small plugin called <a href="https://github.com/EJEHardenberg/qroute">qroute</a> that does this routing. And tested 
the shortcode output with a few custome <a href="https://github.com/EJEHardenberg/dealcodes">shortcodes</a>. If you need nesting
of shortcodes (which is likely), you just need to call do_shortcode on 
whatever the string being returned from the other shortcodes is. </p>

    

  
      <a class="floatleft" href=stack-smashing>Stack Smashing</a>
  

  
      <a class="floatright" href=numbers-as-markers-google-maps>Numbers as Markers on Google Maps</a>
  
    <div id="footer">
      <p>Copyright (c) Ethan Eldridge</p>
    </div>
  </body>
</html>