<html>
  <head>
    <title>404 Error from WordPress Form Submit with an input named 'name'</title>
    <meta name="description" content="Ethan Eldridge's personal website"/>
	<meta name="keywords" content="Ethan,Eldridge,Joachim,Programming"/>
	<meta charset=utf-8 />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

    <link rel='stylesheet' href='/main.css' />
    <script src="/js/app.js"></script>
    <meta name="description" content="Personal website of Ethan Joachim Eldridge. Resume, blog, cooking, writing and more" />
  </head>
  <body>
  	<h1 id="huge">Ethan Joachim Eldridge: A Programmer.</h1>

<ol>
	<li><a href="/index.html">Home</a></li>
	<li><a href="https://github.com/EJEHardenberg">Github</a></li>
	<li><a href="/write">Writing</a></li>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/resume">Resume</a></li>
	<li><a href="//ejehardenberg.github.io/cooking">Cooking</a></li>
</ol>



    <h3>Form with name=&quot;name&quot; causes 404 in WordPress</h3>
<p>While I haven&#39;t tracked down the source of the problem within WordPress itself,
I was having some trouble with a form on a custom template on a WordPress site.</p>
<p>I had made my form, was hitting submit then promptly seeing a 404 page. </p>
<p>Confusing? I&#39;ll say, especially considering the form was submitting to itself. 
So I took a look at my code, commented out the redirects I had, through <code>error_log</code>
around a little trying to track down where the execution broke. Nothing. No err&#39;s,
no warnings.</p>
<p>So I did what any developer does, I googled a few keywords checking for 404 errors
on submitting a form, and then eventually ended up on <a href="http://wordpress.org/support/topic/posting-form-to-custom-template-results-in-404">this support forum</a> where
member <a href="http://wordpress.org/support/profile/ianstapleton">ianstapleton</a> noted that changing the input name caused the form submission 
to work again. </p>
<p>It&#39;s a bit of a strange fix, but it makes sense when you consider the code inside of 
Wordpress Core. Here&#39;s the snippet that is causing the slightly unexpected behavior:</p>
<pre><code>wp-includes/query.php (WordPress Version 3.7.1)
2337        if ( &#39;&#39; != $q[&#39;name&#39;] ) {
2338            $q[&#39;name&#39;] = sanitize_title_for_query( $q[&#39;name&#39;] );
2339            $where .= &quot; AND $wpdb-&gt;posts.post_name = &#39;&quot; . $q[&#39;name&#39;] . &quot;&#39;&quot;;
2340        } elseif ( &#39;&#39; != $q[&#39;pagename&#39;] ) {
2341            if ( isset($this-&gt;queried_object_id) ) {</code></pre>
<p>The <code>$q</code> variable is the query variables which are retrieved like this:</p>
<pre><code>wp-includes/class-wp.php
2142        $q = &amp;$this-&gt;query_vars;
2143
2144        // Fill again in case pre_get_posts unset some vars.
2145        $q = $this-&gt;fill_query_vars($q);</code></pre>
<p>In other words, the <code>$_POST</code> and <code>$_GET</code> variables seem to be merged into a single
<code>query_vars</code> propertie and then used from there. <code>wp_parse_args</code> is used during
part of the merging (from a brief look into the <code>fill_query_vars</code> function) and
so we end up looking for a post with the name of whatever we submitted in the form.
Which is, not what we wanted to do. You could use it to create a custom search
form for looking for exact matches on post names, but that&#39;d be a little silly. </p>
<p>Regardless, I wonder if this is the intended behavior of WordPress or just a result
of lots of code making the assumptions that no user will ever try to use</p>
<pre><code>&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;</code></pre>

    

  
      <a class="floatleft" href=grails-service-mocks>Grails Service Mocks</a>
  

  
   <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'ejehardenberg'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <div id="footer">
      <p>Copyright (c) Ethan Eldridge</p>
    </div>
  </body>
</html>