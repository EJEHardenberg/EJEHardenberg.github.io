<html>
  <head>
    <title>Serial Hill Climber in GoLang</title>
    <meta name="description" content="Ethan Eldridge's personal website"/>
	<meta name="keywords" content="Ethan,Eldridge,Joachim,Programming"/>
	<meta charset=utf-8 />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

    <link rel='stylesheet' href='/main.css' />
    <script src="/js/app.js"></script>
    <meta name="description" content="Personal website of Ethan Joachim Eldridge. Resume, blog, cooking, writing and more" />
    <script type="text/javascript">
     var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-43866715-1']);
      _gaq.push(['_trackPageview']);

      (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
  	<h1 id="huge">Ethan Joachim Eldridge: A Programmer.</h1>

<ol>
	<li><a href="/index.html">Home</a></li>
	<li><a href="https://github.com/EJEHardenberg">Github</a></li>
	<li><a href="/write">Writing</a></li>
	<li><a href="/projects">Projects</a></li>
	<li><a href="/resume">Resume</a></li>
	<li><a href="//ejehardenberg.github.io/cooking">Cooking</a></li>
</ol>



    <h3>Simple Binary Hill Climber in GoLang</h3>
<p>I&#39;ve been playing with <a href="http://golang.org">Go</a> recently and really enjoying it. But one of my problems
was that I couldn&#39;t think of what to do with all that great concurrent power. Web 
applications and servers are of course  one of the things I first thought of, but
that&#39;s basically the Hello World of Go. </p>
<p>So instead, I looked through my books and spotted my copy of Josh Bongard&#39;s <a href="http://mitpress.mit.edu/books/how-body-shapes-way-we-think">How the Body Shapes the Way We Think</a>
that I picked up when I took his course on evolutionary robotics. Our first assignment
in that class was a serial hill climber. It was a super simple program written in
python, a couple for loops and an object. The point of which was to mutate a genome
string into the perfect fitness. </p>
<p>Generations? Population Sizes? Sounds perfect for some concurrency play! So I built
<s>an entire Evolutionary Computation Kit</s> a small program to get a grip on how
channels in Go work, and on wetting my appetite for Evolutionary methods. </p>
<p>Without further adue, here&#39;s the entire Go program:</p>
<script src="https://gist.github.com/EJEHardenberg/9c535f1cd71f2c2a8012.js"></script>

<p>It&#39;s pretty simple. Here&#39;s a quick run down:</p>
<p>We create a simple struct to keep track of each member of the population, they
have a genome as well as a fitness (based on said genome), and they also store a 
reference to a channel. If you&#39;re unfamiliar with Go, you can <a href="https://gobyexample.com/channels">read up on them
here</a> or just take my word that they&#39;re like pipes in a Linux/Unix system. </p>
<p>To create a child we initialize it&#39;s genome to a random binary sequence of 1&#39;s 
and 0&#39;s. Simplistic yes, but this is a toy problem. A cool feature of the way we
initialize our <code>Child</code> is that we use go routines to initialize each <code>Child</code>&#39;s genome
concurrently; when we do this we also collect the initialized parts and feed them
back into our calculation of the fitness as it happens. There&#39;s no real reason to
do this in such a small example, but it&#39;s quite fun nonetheless.</p>
<pre><code>func (c* Child) init(resChan * chan int) {
    c.resultChan = *resChan
    c.genome = make([]int, genomeSize)
    initilizeChannel := make(chan int, genomeSize)
    for i := 0; i &lt; genomeSize; i++ {
        i := i //overshadow local 
        go func(){
            c.genome[i] = rand.Intn(2)
            initilizeChannel &lt;- c.genome[i]
        }()    
    }
    //Compute initial fitness from initalization
    c.fitness = 0
    for i := 0; i &lt; genomeSize; i++ {
        c.fitness += &lt;- initilizeChannel
    }
}</code></pre>
<p>The Mutate function represents our variation in the population, for this example
we&#39;re merely flipping a coin to decide whether or not we should allow a single
portion of the genomic string to change. One again, we fan out for the calculation
and send the fitness back to the owning struct in parts. The most important part
of the Mutate function though, is that it uses the internal <code>resultChan</code> channel
variable in the <code>Child</code> to send the fitness result to whoever is listening.</p>
<pre><code>func (c* Child) Mutate() {
    doneChannel := make(chan int, genomeSize)
    for i := 0; i &lt; genomeSize; i++ {
        i := i
        go func(){
            if rand.Intn(2) == 1 {
                c.genome[i] = rand.Intn(2)
            }
            doneChannel &lt;- c.genome[i]
        }()
    }
    c.fitness = 0
    for i := 0; i &lt; genomeSize; i++ {
        c.fitness += &lt;- doneChannel
    }
    //Send fitness out
    c.resultChan &lt;- c.fitness
}</code></pre>
<p>Where does resultChan go? To the channel we opened in the <code>main</code> function called
<code>resultsChan</code> (name makes sense? imagine that). This channel is responsible for
figuring out which of the population is the best candidate for reproduction to
help shape the next generation of candidates. At the end each generation we mutate
the best <code>Child</code> and replace a small subset of the population with them.</p>
<p>It&#39;s a fun toy example, and this is by no means a Go tutorial, but I hope that this
helps inspire some ideas for people to start using Go as a language to express
inheritly concurrent operations such as genetic algorithms and other evolutionary
methods.</p>

    

  
      <a class="floatleft" href=green-up-vt-app>Green Up Vermont</a>
  

  
   <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'ejehardenberg'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <div id="footer">
      <p>Copyright (c) Ethan Eldridge</p>
    </div>
  </body>
</html>