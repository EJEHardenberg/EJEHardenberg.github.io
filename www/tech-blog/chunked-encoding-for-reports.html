<!DOCTYPE HTML>
<html>
  <head>
    <title>Ethan's Tech Blog | Using Chunked Encoding for Reporting in Wordpress</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="When writing pages that have a lot of output, it&#39;s beneficial to use Chunked Encoding rather than Content-length, this post talks about doing it for reporting screens in WordPress" />
    <meta name="author" content="Ethan Eldridge">
    <meta name="keywords" content="Ethan,Eldridge,Joachim,Programming"/>
    <meta name="robots" content="index, follow"  />
      <meta name="revisit-after" content="1 month" />
      <meta name="viewport" content="width=1040" />
      
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/favicon.ico" type="image/ico">

        
    <!-- Facebook Open Graph Tags -->
    <meta property="og:title" content="Ethan Eldridge | Using Chunked Encoding for Reporting in Wordpress" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="/images/ethan.jpeg" />
    <meta property="og:url" content="http://www.ethanjoachimeldridge.info/" />
    
    <meta property="og:description" content="When writing pages that have a lot of output, it&#39;s beneficial to use Chunked Encoding rather than Content-length, this post talks about doing it for reporting screens in WordPress" />
    

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Ethan Eldridge | Using Chunked Encoding for Reporting in Wordpress" />
    
    <meta name="twitter:description" content="When writing pages that have a lot of output, it&#39;s beneficial to use Chunked Encoding rather than Content-length, this post talks about doing it for reporting screens in WordPress" />
    
    <meta name="twitter:image" content="/images/ethan.jpeg" />
    	<!-- Core CSS Scripts -->
	<link rel='stylesheet' href='/css/style.css' />

	<!-- Core Javascript -->
	<script type="text/javascript" src="/javascript/jquery.min.1.9.1.js" ></script>
	<script type="text/javascript" src="/javascript/app.js" ></script>

	 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43866715-1']);
    _gaq.push(['_trackPageview']);

    (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </head>
  <body>
    <header>
      <h1>Using Chunked Encoding for Reporting in Wordpress</h1>
    </header>


    <div id="content">
      <a href="/tech-blog">Back</a>
      <p>Note: Before you use the TL;DR due be sure it&#39;s appropriate to do so, see <a href="http://wordpress.stackexchange.com/questions/20192/wp-function-filter-for-modifying-http-headers">here</a></p>
<h3>The TL;DR;</h3>
<pre><code>add_action(&#39;template_redirect&#39;, &#39;add_chunked_encoding_for_reports_page_bc_load_speed&#39;);
function add_chunked_encoding_for_reports_page_bc_load_speed(){
    header(&quot;Transfer-encoding: chunked&quot;);    
}
...
flush(); //whenever you want to push a chunk out for sure</code></pre>
<h3>The Explanation</h3>
<p>So, for work I&#39;ve written a number of adminstrative pages for a client that 
involved some kind of reporting. Most of the time, the bulk of the computation 
could be done on the database side, which is where it should be (almost always).
But because the lists sometimes would show large amounts of tabular data the page can take a while to load. </p>
<p>So, to make things appear to load a bit better, I decided to switch the transfer
type to chunked instead of the default. Now, I was doing all this reporting only
on the admin area, so I actually used the <code>init</code> hook and checked <code>is_admin</code> in
my call to the action. In addition, I did <strong>not</strong> place the code into <code>functions.php</code>
like many people do. But rather it is within my own plugin&#39;s page. So only when 
users go to the reports page is the action enabled and the content served up as
chunked.</p>
<p>Note that this strategy, while WordPress specific, isn&#39;t neccesary
limited to WordPress. But also with any sort of PHP page that loads
large quantities of data and needs to do so in a chunked manner. Just be
sure to call <code>flush();</code> if you want to force out a chunk of output.</p>
<p>Also, note that some browsers (like chrome) buffer the first 256/512
bytes of output to do sniffing. So even if you chunk it, if there&#39;s not
a lot of data you might see the page load time not speed up for the
content you can see &#39;above the fold&#39;</p>

      

      
          <a href=hosts-file-deployment>Hosts file and Testing deployment</a>
      

      
          <a href=php-wrong-date-half-hour>Incorrect Time in PHP despite Timezone</a>
      
      <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'ejehardenberg';
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink"><!--
    -->comments powered by <span class="logo-disqus">Disqus</span>
</a>   
    </div>
    <nav>
	<ul>
		
			<li>
				<a href="/index">
					<img src="/images/ethan.jpeg" /><!--
					-->About me
				</a>
			</li>
		
			<li>
				<a href="/projects">
					<img src="/images/project.png" /><!--
					-->Projects
				</a>
			</li>
		
			<li>
				<a href="/resume">
					<img src="/images/cv.png" /><!--
					-->Resume
				</a>
			</li>
		
			<li>
				<a href="/tech-blog">
					<img src="/images/tech-blog.png" /><!--
					-->Tech Blog
				</a>
			</li>
		
			<li>
				<a href="/cooking">
					<img src="/images/cooking.jpg" /><!--
					-->Cooking
				</a>
			</li>
		
			<li>
				<a href="/writing">
					<img src="/images/writing.png" /><!--
					-->Writing
				</a>
			</li>
		
			<li>
				<a href="/contact">
					<img src="/images/contact.png" /><!--
					-->Contact
				</a>
			</li>
		
		<li>
			<a href="https://github.com/EJEHardenberg">
				<img src="/images/github.png" /><!--
				-->Github
			</a>
		</li>
		<li>
			<a href="https://twitter.com/EthanJEldridge">
				<img src="/images/twitter-bird-light-bgs.png" /><!--
				-->@EthanJEldridge
			</a>
		</li>
		<li>
			<a href="http://www.linkedin.com/profile/view?id=151414806">
				<img src="/images/LinkedIn_logo.png" /><!--
				-->LinkIn
			</a>
		</li>
	</ul>
</nav>
  </body>
</html>
  	